# HALO_SHOP
> - 국내 야구팬을 위한 굿즈 쇼핑몰 + 실시간 팬 상호작용 기능이 통합된 커머스형 플랫폼  
> - 벤치마킹 : 스마트스토어, 무신사스토어, SSG굿즈몰, 쿠팡라이브  

---

## 프로젝트 소개:
HALO_SHOP은 굿즈 판매를 넘어서 팬과의 실시간 소통, 포인트/멤버십 기반 리워드, 관리자용 모니터링 시스템, 공격 감지 보안 미들웨어 등  **전자상거래 + 팬 참여형 콘텐츠 + 보안 중심 설계**가 결합된 통합형 쇼핑몰 서비스입니다.

- **프론트엔드**는 `React + Next.js` 기반으로 구성되어 CSR 방식으로 구현되었으며,  
- **백엔드**는 `Spring Boot + MyBatis + JPA`를 기반으로 하여 확장성과 보안성을 강화하였습니다.
- **프로젝트 기간** : 
    - 25.06.19 - 25.06.28 : **설계** : db구성, erd정의, Flow차트 구성, 피그마 제작
    - 25.06.29 - 25.07.14 : **구현 및 테스트** 

---

## 관련 문서
- AWS : [HALO_SHOP 바로가기](http://43.202.189.108/) - 안윤기 배포
  - 관리자더미ID : admin1@gmail.com ~ admin6@gmail.com pw : 1234
  - 유저더미ID   : user1@gmail.com ~ user50@gmail.com pw : 1234
  - 관리자 페이지 : http://43.202.189.108/admin (관리자 로그인 한 상태로 들어가주세요)
  - 현재 s3 순차적으로 적용중이고 각 기능에 에러가 있다면 안윤기에게 문의해주시길 바랍니다 빠른 시일 내 고치겠습니다.
---

## 주요 기능:

| 분류 | 기능 설명 |
|------|-----------|
| 🛒 **쇼핑몰 기능** | - 상품 등록/수정/삭제 (관리자)<br>- 팀/카테고리 필터, 재고관리, 장바구니 기능<br>- GPT 연동 추천 제목 자동 생성 |
| 💳 **결제 시스템** | - 포인트 + 카카오페이 혼합결제<br>- 결제 상태별 트랜잭션 분기 처리 (취소 시 포인트/재고 복구)<br>- 누적 결제 기반 멤버십 등급 자동 갱신 |
| 🧑‍💼 **관리자 시스템** | - 관리자 인증 (세션 기반 + Argon2)<br>- 관리자 권한 분기 (유저/보안/시스템)<br>- 세션 실시간 강제 종료 기능 |
| 📦 **배송 & 리뷰** | - 배송 상태 추적, 리뷰 CRUD<br>- 이미지 업로드 및 중복 리뷰 방지, 신고 기능 |
| ⚙️ **보안 & 인증** | - JWT(Bcrypt) + 세션(Argon2) 하이브리드 인증<br>- XSS/SQL Injection/빠른 요청 감지 미들웨어<br>- 로그인 실패 감지 및 로그 저장<br>- JWT Black/Whitelist & 세션 Storage 분리 관리 |
| 🔔 **실시간 기능** | - WebSocket 기반 실시간 입찰/경매 시스템<br>- 알림 시스템 및 사용자 출석 포인트<br>- 챗봇 UI 및 사용자 상호작용 기능 |
| 🧾 **기부 캠페인** | - 팀별 시즌 캠페인 구조 관리<br>- 이미지 업로드 및 자동 리사이징 기능 포함 |
| 🔍 **로그 시스템** | - 관리자/유저 상태 변화, 로그인/결제/요청 로그 등 전체 트래킹<br>- 추후 블록체인 로그 확장 계획 포함 |

---

## 기여자

| 이름 | 주요 역할 키워드 | 상세 설명 |
|------|------------------|------------|
| **조율비 (팀장)** | 주문 · 결제 · 포인트 · 멤버십 시스템 총괄 | - 혼합 결제(포인트 + 카카오페이) 트랜잭션 처리<br>- 결제 상태 기반 트랜잭션 분기 (취소 시 포인트 및 재고 복원)<br>- 누적 결제액 기반 멤버십 자동 갱신 시스템 개발<br>- 관리자 주문/포인트/등급 관리 API 제공<br>- 팀장으로서 Git 전략 설계, 일정 조율, 코드 리뷰 주도 |
| **김재원** | 상품 관리 및 사용자 구매 인터페이스 | - 상품 CRUD, 장바구니 및 품절 처리 로직 구현<br>- 카테고리/팀 필터 적용, 상세 페이지 UI 및 이미지 확대 기능 개발<br>- 관리자 상품 관리 페이지 구현<br>- GPT 연동 자동 상품명 추천 기능 개발 |
| **박인** | 실시간 경매 및 입찰 · 채팅 시스템 | - 경매 등록/진행/종료 전체 흐름 설계<br>- 입찰 처리 및 낙찰자 결정 로직 구현<br>- WebSocket 기반 실시간 입찰 및 채팅 기능 구현<br>- 프론트와 연동되는 REST API 제공 |
| **김준혁** | 유저 상호작용 및 서비스 관리 | - 팀-시즌-캠페인 구조 관리 및 기부 캠페인 기능 구현<br>- 출석 체크 + 포인트 지급 및 로그 기록 처리<br>- 사용자 문의 시스템 및 관리자 응답 처리 + 실시간 알림 연동<br>- 챗봇 UI 구현 및 UX 개선 처리 |
| **안윤기** | 회원 인증 · 보안 시스템 설계 및 이상행동 탐지, AWS 인프라 및 문서 총괄 | - JWT + 세션 기반 하이브리드 인증 구조 설계<br>- 로그인 실패, 빠른 요청, XSS/SQL Injection 감지 미들웨어 개발<br>- 관리자 이중 확인 및 실시간 활동 감시 시스템 구현<br>- 세션 기반 강제 로그아웃, 세션 조회 API 구현<br>- 보안 도구(Hydra, ffuf 등)를 활용한 실전 공격 시나리오 테스트<br>- AWS 인프라(EC2, Nginx, S3 등) 전체 구성 및 운영 전담: 시간대, 보안그룹, 이미지 업로드 등 실환경 대응<br>- **AWS 연동 막히는 구간 전부 직접 해결하고, 전체 과정 문서화하여 팀에 공유**<br>- README.md, 배포 가이드 등 **프로젝트 문서 정리 총괄** |
| **김경미** | 배송 추적 및 리뷰 기능 구현 | - 배송 상태 추적 시스템 및 인터페이스 구현<br>- 리뷰 CRUD + 이미지 업로드 기능 처리<br>- 리뷰 중복 방지 및 신고 기능 설계<br>- 프론트-백 연동 API 설계 + 사용자 중심 UI/UX 개선 |

---
# 인스턴스 재시작 시 소요 시간
> 리눅스에서 서버 재부팅 시 (시작 시) 백엔드 jar파일 실행 후 프론트엔드 install, 빌드, 실행 순으로 자동화 - 안윤기

# 초기 자동화 (한 스크립트에 백엔드 프론트엔드 전부 다 실행)
| 단계               | 설명                                  | 소요 시간        |
| ---------------- | ----------------------------------- | ------------ |
| EC2 인스턴스 중지 → 시작 | 콘솔에서 인스턴스 시작 클릭 후 부팅 완료까지           | 약 **26초**    |
| 서버+클라이언트 기동      | Spring Boot + React 클라이언트 서비스 완전 구동 | 약 **1분 51초** |


# 업그레이드 버전
| 구분                  | 내용                                                                                                                            | 비고                                                |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------- |
| 목표                | 서버 재부팅 후 자동으로 백엔드 + 프론트 실행                                                                                                    | 최종 서비스 상태 도달 시간 단축                                |
| 측정 기준             | 인스턴스 시작부터 정상 서비스 도달까지                                                                                                         | `time` 명령어 + 로그 기준, 실제 인스턴스 재부팅 후 실시간으로 타이머      |
| 인스턴스 시작 → SSH 연결 | 약 17초                                                                                                                         | 퍼블릭 IP 연결 가능 상태                                   |
| 서버 실행 스크립트 수행 시간 | 약 0.03초 (`real`)                                                                                                              | `start_all.sh`로 병렬 실행 (`&`, `wait`)               |
| 전체 정상 서비스 도달 시간  | **총 26.27초**  서비스 구동시간 77% 단축                                                                  | EC2 시작 → 프론트/백 포함 전체 서비스 정상 동작까지                  |
| 주요 최적화 전략        | - 백엔드/프론트 스크립트 **병렬 실행** (`&`) <br> - `wait`로 동기화 보장 <br> - 프론트는 `.next` 폴더 존재 시 `build` 생략, `node_modules` 존재 시 `npm install`생략 <br> - 기존 프로세스 PID 확인 후 `kill` 처리 | 전체 실행 로직을 `start_all.sh` 하나에 통합, 빠른 복구 및 유지보수 용이화 |


---

##  기술 스택 (HALO_SHOP 프로젝트 기준)

---

###  프론트엔드 (React + Next.js)

| 기술                   | 버전      | 설명                            |
|------------------------|-----------|---------------------------------|
| React                 | 18.3.1    | UI 구성                         |
| Next.js               | 13.5.11   | CSR/SSR 지원 프레임워크         |
| Redux / Redux-Saga    | 4.2.1 / 1.3.0 | 상태관리 / 비동기 처리      |
| next-redux-wrapper     | 8.1.0     | Redux 스토어 Next.js 연동       |
| Styled-components     | 6.1.19    | CSS-in-JS                      |
| Babel Plugin (SC)     | 2.1.4     | styled-components용 바벨 플러그인 |
| Ant Design            | 4.24.16   | UI 컴포넌트                    |
| Axios                 | 1.10.0    | API 통신                       |
| SockJS / StompJS      | 1.6.1 / 7.1.1 | 실시간 입찰 및 알림 기능    |
| Recharts              | 3.0.2     | 데이터 시각화                  |
| Framer Motion         | 12.23.0   | 애니메이션 처리                |
| Lottie-react          | 2.4.1     | JSON 애니메이션 적용           |
| React-slick / slick-carousel | 0.30.3 / 1.8.1 | 이미지 슬라이더        |
| Immer                 | 10.1.1    | 불변성 유지                    |
| react-medium-image-zoom | 5.2.14  | 이미지 확대 기능               |

---

###  백엔드 (Spring Boot)

| 기술                   | 버전        | 설명                            |
|------------------------|-------------|---------------------------------|
| Spring Boot           | 2.7.14      | 백엔드 프레임워크               |
| Java                  | 11          | 언어                            |
| MyBatis               | 2.3.0       | SQL Mapper                      |
| JPA                   | 포함 (내장) | ORM 처리                        |
| Spring Security       | 포함 (내장) | 인증 / 인가                     |
| OAuth2 Client         | 포함 (내장) | 소셜 로그인 인증                |
| JJWT (io.jsonwebtoken) | 0.11.5      | JWT 발급 및 검증                |
| Argon2 / Bcrypt       | 1.70 / 내장 | 관리자 / 사용자 암호화         |
| WebSocket             | 포함 (내장) | 실시간 입찰 및 채팅            |
| AWS S3                | 2.4.4       | 이미지 업로드                   |
| Log4JDBC              | 1.16        | SQL 로그 추적                   |
| Thumbnailator         | 0.4.14      | 이미지 리사이징                |
| Gson                  | 최신        | JSON 직렬화/역직렬화           |
| Lombok                | 1.18.30     | 반복 코드 제거                  |
| Validation (Hibernate Validator) | 6.2.3.Final | 입력값 유효성 검사     |
| Servlet API           | 4.0.1       | JSP/서블릿 용                   |
| JSTL / JSP            | JSTL 1.2 / 내장 | JSP 기반 관리자 뷰 페이지 구성 |
| Thymeleaf + Security  | 3.0.15.RELEASE / 3.0.4.RELEASE | Spring 뷰 엔진         |

---

###  데이터베이스

| 기술   | 버전     | 설명                             |
|--------|----------|----------------------------------|
| MySQL | 8.0.41   | 사용자, 상품, 주문, 포인트 등 저장소 |

---

### 외부 API 연동

| 항목       | 설명 |
|------------|------|
| **KakaoPay**   | 카카오페이 결제 API 연동 (결제/승인/취소) |
| **KakaoMap**   | 배송지 자동완성 주소 검색 기능 제공 |
| **ChatGPT**    | 상품 추천 / 챗봇 서비스용 OpenAI 연동 |
| **AWS S3**     | 이미지 업로드 및 저장, DB 연동 |

---

## 협업 도구

- **Git + GitHub**: 형상관리 및 PR 리뷰  
- **SourceTree**: 시각적 Git 브랜치 관리  
- **Figma**: 화면 설계  
- **KakaoTalk / Discord**: 커뮤니케이션 및 실시간 회의  
- **구글 스프레드시트**: 역할 분담, 일정 관리  
- **오프라인 회의**: 아이디어 및 코드리뷰 

---

## 🧪 테스트 및 보안 품질 관리

| 테스트 항목 | 설명 |
|-------------|------|
| 로그인 실패 / 빠른 요청 / 직접 URL 접근 | 보안 미들웨어에서 감지 후 `logs` 테이블에 기록 |
| XSS / SQL Injection | Payload 감지 및 차단, 로그 저장 |
| 세션 기반 실시간 로그아웃 | 강제 만료 처리 및 감지 로직 구현 |
| JWT 무효화 처리 | Blacklist / Whitelist 로직 구현 |
| 관리자 로그 조회 시스템 | 로그인/결제/차단/삭제 로그 실시간 확인 가능 |
| 도구 활용 | `ffuf`, `Hydra`, `Nikto`, `curl` 등으로 실전 공격 시도 후 방어 테스트 수행 완료 |

## 보안 테스트 결과 : 반복요청  제한 및 리미트 로직 없음

---

## 향후 개선 및 확장 방향

- **예외 상황 대응 및 테스트 자동화 강화**  
  - 카카오페이, 경매, 포인트 등 민감 로직에 대한 반복 테스트 자동화 필요성 대두  
  - 예상치 못한 예외 상황에 대한 사전 시나리오 확보 및 JUnit, Postman 기반 테스트 도입 예정

- **비동기 충돌 및 타이밍 이슈 최소화**  
  - 경매, 리뷰 등 실시간 처리 중 상태 동기화 실패 및 타이밍 오류 발생 경험  
  - 향후 비동기 로직 설계 시 예외 흐름을 고려한 구조화 설계 계획

- **보안 설계 고도화 및 실전 대응 체계 구축**  
  - Hydra, nikto, ffuf 등 보안 도구 활용한 실전 공격 시나리오 테스트 경험  
  - 인증/인가 흐름 및 요청 제한 로직에 대한 취약점 수정 및 고도화 예정  
  - 관리자 세션 감시, 비정상 요청 차단 로직 정교화

- **프론트-백 연동 협업 구조 개선**  
  - 유저 파트와 관리 파트 연동 중 명세 불일치 및 커뮤니케이션 부족 이슈 경험  
  - API 연동 흐름 및 상태 응답 포맷의 통일 필요성 인지  
  - 향후 설계 초기 단계부터 협의 구조 강화 계획

- **API 실효성 검토 및 REST 구조 정비**  
  - 실제 미활용된 API 존재 → 불필요한 리소스 제거 및 효율 중심 설계 필요  
  - 인증 관련 API 및 RESTful 규약 정비 예정

- **UX 설계 개선 및 사용자 시나리오 보강**  
  - 배송 상태, 리뷰 작성, 이미지 업로드 등 UX 편의성 미흡 지점 다수 확인  
  - 초기 설계부터 사용자 흐름 중심 구조로 개편 예정

- **코드 품질 및 기술 공유 체계 확립**  
  - 보안 로직, 배포 구조, AWS 연동, 프론트 연계 등을 일부 인원이 단독 수행  
  - 전체 기술 공유 부족 → 코드리뷰, 문서화 체계 강화 및 역할 분담 개선 필요



---

## 연락처

| 이름 | 이메일 |
|------|--------|
| 조율비 | urby0725@naver.com |
| 김재원 | wodnjs0610@naver.com |
| 김준혁 | jhyukcode@gmail.com |
| 박인 | cooladam_@naver.com |
| 안윤기 | zgha16@gmail.com |
| 김경미 | tkdlzh61117@gmail.com |

---

