# HALO_SHOP
> - 국내 야구팬을 위한 굿즈 쇼핑몰 + 실시간 팬 상호작용 기능이 통합된 커머스형 플랫폼  
> - 벤치마킹 : 스마트스토어, 무신사스토어, SSG굿즈몰, 쿠팡라이브
> - 현재 깃에 있는 버전은 로컬 개발환경 버전입니다. 리팩토링 + aws 버전이 필요하시다면 안윤기에게 문의 바랍니다
> - 꾸준히 리팩토링 중이니 기능에러나 있다면 알려주시길 바랍니다.

---

## 프로젝트 소개:
HALO_SHOP은 굿즈 판매를 넘어서 팬과의 실시간 소통, 포인트/멤버십 기반 리워드, 관리자용 모니터링 시스템, 공격 감지 보안 미들웨어 등  **전자상거래 + 팬 참여형 콘텐츠 + 보안 중심 설계**가 결합된 통합형 쇼핑몰 서비스입니다.

- **프론트엔드**는 `React + Next.js` 기반으로 구현되었으며,  
- **백엔드**는 `Spring Boot + MyBatis + JPA`를 기반으로 하여 확장성과 보안성을 강화하였습니다.
- **프로젝트 기간** : 
    - 25.06.19 - 25.06.28 : **설계** : db구성, erd정의, Flow차트 구성, 피그마 제작
    - 25.06.29 - 25.07.14 : **구현 및 테스트** 

---

## 관련 문서
- AWS : [HALO_SHOP 바로가기](http://43.202.189.108/) - 안윤기 배포
  - 관리자더미ID : admin1@gmail.com ~ admin6@gmail.com pw : 1234
  - 유저더미ID   : user1@gmail.com ~ user50@gmail.com pw : 1234
  - 관리자 페이지 : http://43.202.189.108/admin (관리자 로그인 한 상태로 들어가주세요)
  - 현재 s3 순차적으로 적용중이고 각 기능에 에러가 있다면 안윤기에게 문의해주시길 바랍니다 빠른 시일 내 고치겠습니다.
  - 도커 적용중입니다. 25.08.01~
---

##  기술 스택 (HALO_SHOP 프로젝트 기준)


###  프론트엔드 (React + Next.js)

| 기술                   | 버전      | 설명                            |
|------------------------|-----------|---------------------------------|
| React                 | 18.3.1    | UI 구성                         |
| Next.js               | 13.5.11   | CSR/SSR 지원 프레임워크         |
| Redux / Redux-Saga    | 4.2.1 / 1.3.0 | 상태관리 / 비동기 처리      |
| next-redux-wrapper     | 8.1.0     | Redux 스토어 Next.js 연동       |
| Styled-components     | 6.1.19    | CSS-in-JS                      |
| Babel Plugin (SC)     | 2.1.4     | styled-components용 바벨 플러그인 |
| Ant Design            | 4.24.16   | UI 컴포넌트                    |
| Axios                 | 1.10.0    | API 통신                       |
| SockJS / StompJS      | 1.6.1 / 7.1.1 | 실시간 입찰 및 알림 기능    |
| Recharts              | 3.0.2     | 데이터 시각화                  |
| Framer Motion         | 12.23.0   | 애니메이션 처리                |
| Lottie-react          | 2.4.1     | JSON 애니메이션 적용           |
| React-slick / slick-carousel | 0.30.3 / 1.8.1 | 이미지 슬라이더        |
| Immer                 | 10.1.1    | 불변성 유지                    |
| react-medium-image-zoom | 5.2.14  | 이미지 확대 기능               |

---

###  백엔드 (Spring Boot)

| 기술                   | 버전        | 설명                            |
|------------------------|-------------|---------------------------------|
| Spring Boot           | 2.7.14      | 백엔드 프레임워크               |
| Java                  | 11          | 언어                            |
| MyBatis               | 2.3.0       | SQL Mapper                      |
| JPA                   | 포함 (내장) | ORM 처리                        |
| Spring Security       | 포함 (내장) | 인증 / 인가                     |
| OAuth2 Client         | 포함 (내장) | 소셜 로그인 인증                |
| JJWT (io.jsonwebtoken) | 0.11.5      | JWT 발급 및 검증                |
| Argon2 / Bcrypt       | 1.70 / 내장 | 관리자 / 사용자 암호화         |
| WebSocket             | 포함 (내장) | 실시간 입찰 및 채팅            |
| AWS S3                | 2.4.4       | 이미지 업로드                   |
| Log4JDBC              | 1.16        | SQL 로그 추적                   |
| Thumbnailator         | 0.4.14      | 이미지 리사이징                |
| Gson                  | 최신        | JSON 직렬화/역직렬화           |
| Lombok                | 1.18.30     | 반복 코드 제거                  |
| Validation (Hibernate Validator) | 6.2.3.Final | 입력값 유효성 검사     |
| Servlet API           | 4.0.1       | JSP/서블릿 용                   |
| JSTL / JSP            | JSTL 1.2 / 내장 | JSP 기반 관리자 뷰 페이지 구성 |
| Thymeleaf + Security  | 3.0.15.RELEASE / 3.0.4.RELEASE | Spring 뷰 엔진         |

---

###  데이터베이스

| 기술   | 버전     | 설명                             |
|--------|----------|----------------------------------|
| MySQL | 8.0.41   | 사용자, 상품, 주문, 포인트 등 저장소 |

---

### 외부 API 연동

| 항목       | 설명 |
|------------|------|
| **KakaoPay**   | 카카오페이 결제 API 연동 (결제/승인/취소) |
| **KakaoMap**   | 배송지 자동완성 주소 검색 기능 제공 |
| **ChatGPT**    | 상품 추천 / 챗봇 서비스용 OpenAI 연동 |
| **AWS S3**     | 이미지 업로드 및 저장, DB 연동 |

---

## 주요 기능:

| 분류            | 주요 기능                                                     | 담당자          | 컴퓨터사이언스(CS) 적용 요소                                             |
| ------------- | --------------------------------------------------------- | ------------ | ------------------------------------------------------------- |
| 🛒 쇼핑몰        | 상품 등록/수정/삭제, 팀/카테고리 필터, 장바구니, GPT 추천                      | 김재원          | 상품/재고 트랜잭션 처리, GPT API 연동 사이드바 구성, React 기반 인터랙션(UI 확대·애니메이션) |
| 💳 결제 시스템     | 포인트 + 카카오페이 혼합결제, 상태별 트랜잭션 처리, 멤버십 자동 갱신                  | 조율비          | 결제 흐름 설계, 트랜잭션 분기, 누적 계산 로직 및 자동 등급 갱신 알고리즘                   |
| ⚙️ 인증 · 보안    | JWT(Bcrypt) + 세션(Argon2) 병행 인증, XSS/SQLI/빠른 요청 감지, 관리자 인증 | 안윤기      | 보안 미들웨어, 로그인 실패 감지/로그 저장, 토큰 + 세션 병합 구조, 실전 공격 시나리오 테스트       |
| 🧑‍💼 관리자 시스템 | 권한 분리, 세션 실시간 조회/강제 종료, 관리자 로그 관리                         | 안윤기  | Role 기반 접근 제어, 세션 추적/종료 알고리즘, 관리자 실시간 감시/로그 추적 시스템            |
| 📦 배송 & 리뷰    | 배송 상태 추적, 리뷰 CRUD, 이미지 업로드, 신고/중복 방지                      | 김경미          | 리뷰 이미지 + 중복 체크 로직, 배송 상태 실시간 갱신 (10초 주기), 지도 연동 및 별점 인터랙션     |
| 🔔 실시간 기능     | 실시간 경매/입찰/낙찰, 실시간 채팅, 챗봇, 출석 포인트 지급                       | 박인 / 김준혁     | WebSocket + Pub/Sub 브로드캐스트, REST + 스케줄러 병행 처리, 자동 낙찰 로직       |
| 🧾 기부 캠페인     | 시즌/팀 기반 캠페인 구조, 이미지 자동 리사이징                               | 김준혁          | 팀-시즌-캠페인 DB 구조 설계, 이미지 처리 최적화                                 |
| 🔍 로그 시스템     | 로그인/요청/결제/관리자 행위 기록, 블록체인 확장 설계 예정                        | 안윤기      | 로그 구조 설계, 상태 변화 트래킹, 향후 무결성 기반 블록체인 로그 구조 준비                  |
| 🛎️ CS 대응     | 문의 접수/관리자 응답, 알림 연동, 사용자 UX 개선                            | 김준혁          | 비동기 처리, 실시간 알림 구조, UX 흐름 최적화 설계                               |


---

## 기여자

| 이름           | 주요 역할 키워드                                | 상세 설명                                                                                                                                                   |
| ------------ | ---------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **조율비 (팀장)** | 주문 · 결제 · 포인트 · 멤버십 시스템 총괄               | - 포인트/카카오페이 혼합 결제 트랜잭션 처리<br>- 결제 상태 분기 및 멤버십 자동 갱신 설계<br>- Git 전략·일정 조율·코드 리뷰 총괄                                                                       |
| **김재원**      | 상품 관리 및 사용자 구매 인터페이스                     | - 상품/재고 CRUD 트랜잭션 처리<br>- GPT 추천 사이드바 연동<br>- 이미지 확대/Lottie 기반 UI 구성                                                                                    |
| **박인**       | 실시간 경매 및 입찰 · 채팅 시스템                     | - 경매\~낙찰 전 과정 WebSocket + 스케줄러 병행<br>- REST API 기반 백엔드 설계 및 자동 낙찰 동기화                                                                                   |
| **김준혁**      | 유저 상호작용 및 서비스 관리                         | - 출석 포인트, 챗봇, 사용자 문의 및 응답 처리<br>- 기부 캠페인 구조, 알림 연동 및 UX 개선                                                                                              |
| **안윤기**      | 인증 · 보안 · 관리자 시스템 단독, 로그 시스템, AWS 인프라 총괄 | - JWT + 세션 병행 인증 구조 및 보안 미들웨어 구현<br>- 관리자 권한 분리, 세션 추적, 강제 로그아웃 등 **전 관리자 기능 단독 개발**<br>- 실시간 로그 시스템, 블록체인 확장 구조 설계<br>- EC2/S3/Nginx 등 AWS 전반 설정 및 문서화 |
| **김경미**      | 배송 · 리뷰 기능                               | - 리뷰 중복 체크, 이미지 업로드, 별점 인터랙션 구현<br>- 배송 상태 자동 등록 및 실시간 지도 연동                                                                                            |


---
# 인스턴스 재시작 시 소요 시간
> 리눅스에서 서버 재부팅 시 (시작 시) 백엔드 jar파일 실행 후 프론트엔드 install, 빌드, 실행 순으로 자동화 - 안윤기

# 초기 자동화 (한 스크립트에 백엔드 프론트엔드 전부 다 실행)
| 단계               | 설명                                  | 소요 시간        |
| ---------------- | ----------------------------------- | ------------ |
| EC2 인스턴스 중지 → 시작 | 콘솔에서 인스턴스 시작 클릭 후 부팅 완료까지           | 약 **26초**    |
| 서버+클라이언트 기동      | Spring Boot + React 클라이언트 서비스 완전 구동 | 약 **1분 51초** |


# 업그레이드 버전
| 구분                  | 내용                                                                                                                            | 비고                                                |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------- |
| 목표                | 서버 재부팅 후 자동으로 백엔드 + 프론트 실행                                                                                                    | 최종 서비스 상태 도달 시간 단축                                |
| 측정 기준             | 인스턴스 시작부터 정상 서비스 도달까지                                                                                                         | `time` 명령어 + 로그 기준, 실제 인스턴스 재부팅 후 실시간으로 타이머      |
| 인스턴스 시작 → SSH 연결 | 약 17초                                                                                                                         | 퍼블릭 IP 연결 가능 상태                                   |
| 서버 실행 스크립트 수행 시간 | 약 0.03초 (`real`)                                                                                                              | `start_all.sh`로 병렬 실행 (`&`, `wait`)               |
| 전체 정상 서비스 도달 시간  | **총 26.27초**  서비스 구동시간 77% 단축                                                                  | EC2 시작 → 프론트/백 포함 전체 서비스 정상 동작까지                  |
| 주요 최적화 전략        | - 백엔드/프론트 스크립트 **병렬 실행** (`&`) <br> - `wait`로 동기화 보장 <br> - 프론트는 `.next` 폴더 존재 시 `build` 생략, `node_modules` 존재 시 `npm install`생략 <br> - 기존 프로세스 PID 확인 후 `kill` 처리 | 전체 실행 로직을 `start_all.sh` 하나에 통합, 빠른 복구 및 유지보수 용이화 |


---


---

## 협업 도구

- **Git + GitHub**: 형상관리 및 PR 리뷰  
- **SourceTree**: 시각적 Git 브랜치 관리  
- **Figma**: 화면 설계  
- **KakaoTalk / Discord**: 커뮤니케이션 및 실시간 회의  
- **구글 스프레드시트**: 역할 분담, 일정 관리  
- **오프라인 회의**: 아이디어 및 코드리뷰 

---

## 🧪 테스트 및 보안 품질 관리

| 테스트 항목 | 설명 |
|-------------|------|
| 로그인 실패 / 빠른 요청 / 직접 URL 접근 | 보안 미들웨어에서 감지 후 `logs` 테이블에 기록 |
| XSS / SQL Injection | Payload 감지 및 차단, 로그 저장 |
| 세션 기반 실시간 로그아웃 | 강제 만료 처리 및 감지 로직 구현 |
| JWT 무효화 처리 | Blacklist / Whitelist 로직 구현 |
| 관리자 로그 조회 시스템 | 로그인/결제/차단/삭제 로그 실시간 확인 가능 |
| 도구 활용 | `ffuf`, `Hydra`, `Nikto`, `curl` 등으로 실전 공격 시도 후 방어 테스트 수행 완료 |

## 보안 테스트 결과 : 반복요청  제한 및 리미트 로직 없음

---

## 향후 개선 및 확장 방향

- **예외 상황 대응 및 테스트 자동화 강화**  
  - 카카오페이, 경매, 포인트 등 민감 로직에 대한 반복 테스트 자동화 필요성 대두  
  - 예상치 못한 예외 상황에 대한 사전 시나리오 확보 및 JUnit, Postman 기반 테스트 도입 예정

- **비동기 충돌 및 타이밍 이슈 최소화**  
  - 경매, 리뷰 등 실시간 처리 중 상태 동기화 실패 및 타이밍 오류 발생 경험  
  - 향후 비동기 로직 설계 시 예외 흐름을 고려한 구조화 설계 계획

- **보안 설계 고도화 및 실전 대응 체계 구축**  
  - Hydra, nikto, ffuf 등 보안 도구말고도 더 다양한 실전 공격 시나리오 테스트 경험  
  - 인증/인가 흐름 및 요청 제한 로직에 대한 취약점 수정 및 고도화 예정  

- **프론트-백 연동 협업 구조 개선**  
  - 유저 파트와 관리 파트 연동 중 명세 불일치 및 커뮤니케이션 부족 이슈 경험  
  - API 연동 흐름 및 상태 응답 포맷의 통일 필요성 인지  
  - 향후 설계 초기 단계부터 협의 구조 강화 계획

- **API 실효성 검토 및 REST 구조 정비**  
  - 실제 미활용된 API 존재 → 불필요한 리소스 제거 및 효율 중심 설계 필요  
  - 인증 관련 API 및 RESTful 규약 정비 예정

- **UX 설계 개선 및 사용자 시나리오 보강**  
  - 배송 상태, 리뷰 작성, 이미지 업로드 등 UX 편의성 미흡 지점 다수 확인  
  - 초기 설계부터 사용자 흐름 중심 구조로 개편 예정

- **코드 품질 및 기술 공유 체계 확립**  
  - 보안 로직, 배포 구조, AWS 연동, 프론트 연계 등을 일부 인원이 단독 수행  
  - 전체 기술 공유 부족 → 코드리뷰, 문서화 체계 강화 및 역할 분담 개선 필요



---

## 연락처

| 이름 | 이메일 | GitHub |
|------|--------|-- |
| 조율비 | urby0725@naver.com | https://github.com/joyulbi |
| 박인 | cooladam_@naver.com | https://github.com/IN-P |
| 김재원 | wodnjs0610@naver.com | https://github.com/jaewon9611 |
| 김준혁 | jhyukcode@gmail.com | https://github.com/jhyukcode |
| 안윤기 | zgha16@gmail.com | https://github.com/yoon0416 |
| 김경미 | tkdlzh61117@gmail.com | https://github.com/xpcm0321 |

---

